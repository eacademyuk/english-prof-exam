# نظام تصحيح الامتحان الآلي بالذكاء الاصطناعي (AI Graded Exam System)

هذا المشروع يوفر نظامًا خلفيًا (Backend) يعتمد على إطار عمل FastAPI لتلقي إجابات امتحان اللغة الإنجليزية، وتصحيحها تلقائيًا باستخدام الذكاء الاصطناعي (OpenAI API) لتقييم أقسام الكتابة والمحادثة، وإرسال تقرير مفصل بالنتائج إلى بريد إلكتروني محدد.

## الميزات الرئيسية

*   **استقبال الإجابات:** يستقبل بيانات النموذج من ملف `index.html` المعدل.
*   **التصحيح الموضوعي:** يصحح أسئلة الاستماع والقراءة تلقائيًا.
*   **التصحيح بالذكاء الاصطناعي:** يستخدم نموذج GPT-4.1-mini لتقييم:
    *   **الكتابة:** تقييم القواعد، المفردات، التماسك، وتحقيق المهمة.
    *   **المحادثة:** يقوم بتحويل رابط الصوت إلى نص (باستخدام `manus-speech-to-text` الذي يجب استبداله بخدمة خارجية مثل Whisper API في بيئة الإنتاج)، ثم يقيّم الطلاقة، النطق، المدى اللغوي، والدقة النحوية.
*   **إرسال التقرير:** يرسل تقريرًا مفصلاً بتنسيق HTML إلى البريد الإلكتروني `info@academy-uk.net`.

## متطلبات التشغيل

1.  **Python 3.11+**
2.  **OpenAI API Key:** يجب تعيين مفتاح API الخاص بك كمتغير بيئة باسم `OPENAI_API_KEY`.
3.  **خدمة SMTP:** لإرسال الإيميلات فعليًا، يجب تعديل دالة `send_email_report` في ملف `main.py` لاستخدام خادم SMTP حقيقي (مثل Gmail, SendGrid, إلخ) مع بيانات الاعتماد الخاصة بك.

## خطوات التشغيل

### 1. إعداد بيئة Python

```bash
# إنشاء بيئة افتراضية
python3.11 -m venv venv

# تفعيل البيئة الافتراضية
source venv/bin/activate

# تثبيت المتطلبات
pip install -r requirements.txt
```

### 2. تشغيل الخادم الخلفي (Backend)

تأكد من أنك في مجلد `exam_backend`، ثم قم بتشغيل الخادم:

```bash
uvicorn main:app --host 0.0.0.0 --port 8000
```

سيتم تشغيل الخادم على المنفذ `8000`.

### 3. تشغيل الامتحان (Frontend)

1.  افتح ملف `english_exam_content/index.html` في متصفح الويب.
2.  **ملاحظة هامة:** تم تعديل هذا الملف ليرسل البيانات إلى `http://localhost:8000/submit_exam`. إذا كنت تشغل الخادم على مضيف مختلف، يجب تعديل السطر رقم 10 في `index.html` ليطابق عنوان الخادم الجديد.

### 4. إرسال الإيميل (تعديل ضروري)

**ملف `main.py` حاليًا يقوم بمحاكاة إرسال الإيميل.**

لإرسال الإيميل فعليًا، يجب عليك:

1.  إلغاء التعليق عن الجزء الخاص بـ `smtplib` في دالة `send_email_report`.
2.  استبدال بيانات خادم SMTP الوهمية (مثل `smtp.yourserver.com`) ببيانات خادم الإيميل الخاص بك.
3.  توفير بيانات الاعتماد (اسم المستخدم وكلمة المرور) للخادم.

```python
# في دالة send_email_report في main.py
# ...
try:
    server = smtplib.SMTP("smtp.yourserver.com", 587) # استبدل
    server.starttls()
    server.login("your_email", "your_password") # استبدل
    server.sendmail("no-reply@manus-ai.com", target_email, msg.as_string())
    server.quit()
    return True
except Exception as e:
# ...
```

## هيكل المشروع

```
.
├── english_exam_content/
│   ├── index.html          # ملف الامتحان المعدل
│   ├── style.css
│   ├── script.js
│   ├── listening_audio.wav
│   └── logo.png
└── exam_backend/
    ├── main.py             # الخادم الخلفي (FastAPI) ومنطق التصحيح
    ├── requirements.txt    # متطلبات Python
    ├── README.md           # هذا الملف
    └── venv/               # البيئة الافتراضية (لا يتم تضمينها في التسليم)
```
